# backend-development-on-go
Backend-development on Go. Level 1


###Lesson 2 Chat

Добавлена структура для каналов сервера, в основном,
чтобы уйти от использования глобальных переменных.

Изменения внесены в функцию handleConnect обработчика соединения.

- Создается канал из строк для нового клиента - соединения;
- Запускается горутина, которая будет печатать сообщения в канал соединения клиента;
- Запоминаем ip, port клиента, выводим строку с приглашением ввести никнэйм
- Вызываем функцию, которая вернёт введенный пользователем никнейм
 
Я пока не смог найти другого решения, как то, что
определить по переносу строки, вводом Enter или как-то еще,
что ввод завершен. Сделал, через bufio.NewScanner(),
который по умолчанию вызывается с функцией ScanLines - сканирование по строке. 
Таким образом, я просто навесил туда счетчик строк
и сделал проверку на не пустой ввод.

- Записываем в канал entering новый канал клиента
- Записываем в канал messages, сообщение для всех остальных клиентов, что новый пользователь присоединился
- Записываем в канал пользователя, приветствие
- Эмулируем запись в лог сервера о новом пользователе
- Запускаем новый bufio.NewScanner(conn) на соединение и ждем ввода от пользователя, каждая новая строка ввода пишется в канал сообщений
- После завершения ввода (ctrl+z, ctrl+z, ctrl+d) передаем канал пользователя в канал leaving, обрабатываем выход, пишем сообщение, закрываем соединение

 
